{
  "prompt": "You are working on the 'scm_adapter' Redmine plugin that integrates GitHub and GitLab. Key points: (1) Framework: Redmine 6.0.0 on Rails 7.2, Ruby 3.3; plugin packaged as a Rails engine under lib/scm_adapter/engine.rb with locale files in config/locales and routes in config/routes.rb. (2) Features: integration settings per project (models: ScmAdapter::IntegrationSetting, ProjectLink, SyncRule, CommitEvent); REST controllers under app/controllers/scm_adapter with webhooks for GitHub and GitLab, settings UI under app/controllers/scm_adapter/settings_controller.rb and views in app/views/scm_adapter/settings; test controller for connectivity checks; service layer under app/services/scm_adapter/sync for mapping/dispatcher/keyword parsing; Sidekiq jobs for GitHub/GitLab sync under app/jobs/scm_adapter. (3) Webhooks: GitHub/GitLab controllers receive JSON payloads, skip CSRF, validate signatures/tokens (401 if missing/invalid), and resolve projects via ProjectLink first by remote_project_id then by remote_full_path; conflicts -> 409, missing -> 404. Dispatch updates issue status via Close-Keywords and persist commit metadata to ScmAdapter::CommitEvent. (4) Migrations: db/migrate/001..005 create project_links, integration_settings, sync_rules, commit_events, and unique index for provider+remote_project_id; MySQL branch uses JSON columns without defaults to satisfy MySQL 8 constraints. (5) Docker/Infra: docker-compose.redmine.yml runs mysql:8, redis:7, redmine app and sidekiq built from infrastruktur/redmine/Dockerfile. Dockerfile clones Redmine, copies plugin, adds gems (sidekiq, redis, faraday, faraday-retry, multi_json, connection_pool), writes database.yml for MySQL, installs bundles, entrypoints run db:migrate then redmine:plugins:migrate and start via Puma. Compose maps host port 8090->3000, mounts plugin dir into /usr/src/redmine/plugins/scm_adapter; SECRET_KEY_BASE, REDMINE_DB_* envs. Sidekiq uses sidekiq-entrypoint.sh. (6) Security and notes: webhooks require signature/token validation (GitHub HMAC-SHA256 X-Hub-Signature-256, GitLab X-Gitlab-Token); project mapping returns 404/409 on missing/ambiguous links; unloadable is shimmed via engine initializer for Zeitwerk compatibility. (7) UI: Issue view renders last commit events (provider, SHA link, message, author, time) via hook partial. (8) Tests: test directory with unit (clients, parser) and integration webhook tests using Redmine test helper. Keep responses concise, in English by default unless user asks otherwise." 
}
